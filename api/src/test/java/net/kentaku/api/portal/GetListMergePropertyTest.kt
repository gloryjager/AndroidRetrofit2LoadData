/*
 * Copyright (C) Daito Trust Construction Co., Ltd. All Rights Reserved.
 */

package net.kentaku.api.portal

import io.reactivex.schedulers.Schedulers
import net.kentaku.api.portal.model.GetListMergePropertyResponse
import org.junit.Assert.*
import org.junit.Test


/**
 * Created by tsuyosh on 17/10/12.
 */

class GetListMergePropertyTest : PortalApiTest() {
    @Test
    fun testMoshi() {
        val json = """
{"result": 0,"message": "","total_count": 44,"start_number": 1,"properties": [{"disp_name": "岩本町駅　1K　7階","property_name": "千代田タワーマンション","room_number_text": "-","traffic": "東京都新宿線岩本町駅 徒歩3分","address": "東京都千代田区岩本町２丁目","all_floor_num": "9","house_age": "築15年","completion_date": "2002年7月","new_build": false,"building_kind":"マンション","city_id": 13101,"latitude": 128497382,"longitude": 503194284,"property_images":[{"kind": 1,"url": "www.eheya.net/propertyimage/000/000/300/277/681/000/829/000/001/000000300277681000829000001_1_1.jpg"},{"kind": 10,"url": "www.eheya.net/propertyimage/000/000/300/277/681/000/829/000/001/000000300277681000829000001_10_1.jpg"}],"same_building_num": 1,"same_building_properties": [{"property_full_id": 300277681000829000001,"firm_side_code": "s-3","floor": "7","room_number_text": "-","disp_price": "6.9万円","price": 69000,"disp_manage_cost": "13,000円","manage_cost": 13000,"disp_deposit": "-","deposit": null,"deposit_unit": 1,"disp_key_money": "2.0ヶ月","key_money": 2.0,"keymoney_unit": 2,"disp_repair_cost": "-","repair_cost": null,"repaircost_unit": 1,"house_plan": "1K","disp_area": "22.74","area": 22.74,"trader_id": 27768,"new_arrival": true}]},{"disp_name": "小伝馬町駅　1R　13階","property_name": "0812神田永谷マンション","room_number_text": "1301","traffic": "東京地下鉄日比谷線小伝馬町駅 徒歩3分","address": "東京都千代田区岩本町２丁目","all_floor_num": "13","house_age": "築39年","completion_date": "1978年3月","new_build": false,"building_kind":"マンション","city_id": 13101,"latitude": 128494310,"longitude": 503196910,"property_images":[{"kind": 1,"url": "www.eheya.net/propertyimage/000/000/300/123/640/004/149/016/123/000000300123640004149016123_1_1.jpg"},{"kind": 10,"url": "www.eheya.net/propertyimage/000/000/300/123/640/004/149/016/123/000000300123640004149016123_10_1.jpg"}],"same_building_num": 1,"same_building_properties": [{"property_full_id": 300123640004149016123,"firm_side_code": "27031305-1","floor": "13","room_number_text": "1301","disp_price": "7.0万円","price": 70000,"disp_manage_cost": "-","manage_cost": null,"disp_deposit": "-","deposit": null,"deposit_unit": 1,"disp_key_money": "-","key_money": null,"keymoney_unit": 1,"disp_repair_cost": "-","repair_cost": null,"repaircost_unit": 1,"house_plan": "1R","disp_area": "21.43","area": 21.43,"trader_id": 12364,"new_arrival": true}]},{"disp_name": "メインステージ神田岩本町Ⅱ","property_name": "メインステージ神田岩本町Ⅱ","room_number_text": "603","traffic": "総武本線馬喰町駅 徒歩3分","address": "東京都千代田区岩本町１丁目","all_floor_num": "8","house_age": "築10年","completion_date": "2007年7月","new_build": false,"building_kind":"マンション","city_id": 13101,"latitude": 128495420,"longitude": 503204710,"property_images":[{"kind": 1,"url": "www.eheya.net/propertyimage/000/000/300/201/850/001/870/008/500/000000300201850001870008500_1_1.jpg"},{"kind": 10,"url": "www.eheya.net/propertyimage/000/000/300/201/850/001/870/008/500/000000300201850001870008500_10_1.jpg"}],"same_building_num": 1,"same_building_properties": [{"property_full_id": 300201850001870008500,"firm_side_code": "27563320-1","floor": "6","room_number_text": "603","disp_price": "7.7万円","price": 77000,"disp_manage_cost": "12,000円","manage_cost": 12000,"disp_deposit": "-","deposit": null,"deposit_unit": 1,"disp_key_money": "-","key_money": null,"keymoney_unit": 1,"disp_repair_cost": "-","repair_cost": null,"repaircost_unit": 1,"house_plan": "1K","disp_area": "22.49","area": 22.49,"trader_id": 20185,"new_arrival": true}]},{"disp_name": "秋葉原駅　1K　2階","property_name": "アイフェリーク神田","room_number_text": "-","traffic": "山手線秋葉原駅 徒歩7分","address": "東京都千代田区神田東紺屋町","all_floor_num": "13","house_age": "築12年","completion_date": "2005年8月","new_build": false,"building_kind":"マンション","city_id": 13101,"latitude": 128495342,"longitude": 503189194,"property_images":[{"kind": 1,"url": "www.eheya.net/propertyimage/000/000/300/277/681/000/936/000/001/000000300277681000936000001_1_1.jpg"},{"kind": 10,"url": "www.eheya.net/propertyimage/000/000/300/277/681/000/936/000/001/000000300277681000936000001_10_1.jpg"}],"same_building_num": 1,"same_building_properties": [{"property_full_id": 300277681000936000001,"firm_side_code": "hK1028-17","floor": "2","room_number_text": "-","disp_price": "7.9万円","price": 79000,"disp_manage_cost": "-","manage_cost": null,"disp_deposit": "-","deposit": null,"deposit_unit": 1,"disp_key_money": "-","key_money": null,"keymoney_unit": 1,"disp_repair_cost": "-","repair_cost": null,"repaircost_unit": 1,"house_plan": "1K","disp_area": "22.2","area": 22.2,"trader_id": 27768,"new_arrival": true}]},{"disp_name": "サンハイツ神田キタムラビル","property_name": "サンハイツ神田キタムラビル","room_number_text": "8F","traffic": "山手線神田駅 徒歩4分","address": "東京都千代田区神田東紺屋町","all_floor_num": "10","house_age": "築35年","completion_date": "1982年9月","new_build": false,"building_kind":"マンション","city_id": 13101,"latitude": 128495052,"longitude": 503188527,"property_images":[{"kind": 1,"url": "www.eheya.net/propertyimage/000/000/300/204/440/024/870/024/870/000000300204440024870024870_1_1.jpg"},{"kind": 10,"url": "www.eheya.net/propertyimage/000/000/300/204/440/024/870/024/870/000000300204440024870024870_10_1.jpg"}],"same_building_num": 1,"same_building_properties": [{"property_full_id": 300204440024870024870,"firm_side_code": "92394","floor": "8","room_number_text": "8F","disp_price": "7.9万円","price": 79000,"disp_manage_cost": "-","manage_cost": null,"disp_deposit": "-","deposit": null,"deposit_unit": 1,"disp_key_money": "-","key_money": null,"keymoney_unit": 1,"disp_repair_cost": "-","repair_cost": null,"repaircost_unit": 1,"house_plan": "1R","disp_area": "19.83","area": 19.83,"trader_id": 20444,"new_arrival": false}]},{"disp_name": "秋葉原駅　1R　9階","property_name": "ライオンズマンション秋葉原","room_number_text": "904","traffic": "山手線秋葉原駅 徒歩4分","address": "東京都千代田区神田練塀町","all_floor_num": "12","house_age": "築31年","completion_date": "1986年8月","new_build": false,"building_kind":"マンション","city_id": 13101,"latitude": 128520629,"longitude": 503190147,"property_images":[{"kind": 1,"url": "www.eheya.net/propertyimage/000/000/300/060/220/069/098/069/098/000000300060220069098069098_1_1.jpg"},{"kind": 10,"url": "www.eheya.net/propertyimage/000/000/300/060/220/069/098/069/098/000000300060220069098069098_10_1.jpg"}],"same_building_num": 1,"same_building_properties": [{"property_full_id": 300060220069098069098,"firm_side_code": "915339","floor": "9","room_number_text": "904","disp_price": "8.0万円","price": 80000,"disp_manage_cost": "-","manage_cost": null,"disp_deposit": "-","deposit": null,"deposit_unit": 1,"disp_key_money": "-","key_money": null,"keymoney_unit": 1,"disp_repair_cost": "-","repair_cost": null,"repaircost_unit": 1,"house_plan": "1R","disp_area": "17.88","area": 17.88,"trader_id": 6022,"new_arrival": false}]},{"disp_name": "ライオンズマンション秋葉原","property_name": "ライオンズマンション秋葉原","room_number_text": "904","traffic": "山手線秋葉原駅 徒歩4分","address": "東京都千代田区神田練塀町","all_floor_num": "12","house_age": "築31年","completion_date": "1986年8月","new_build": false,"building_kind":"マンション","city_id": 13101,"latitude": 128520629,"longitude": 503190147,"property_images":[{"kind": 1,"url": "www.eheya.net/propertyimage/000/000/300/167/420/034/683/034/683/000000300167420034683034683_1_1.jpg"},{"kind": 10,"url": "www.eheya.net/propertyimage/000/000/300/167/420/034/683/034/683/000000300167420034683034683_10_1.jpg"}],"same_building_num": 1,"same_building_properties": [{"property_full_id": 300167420034683034683,"firm_side_code": "914351","floor": "9","room_number_text": "904","disp_price": "8.0万円","price": 80000,"disp_manage_cost": "-","manage_cost": null,"disp_deposit": "-","deposit": null,"deposit_unit": 1,"disp_key_money": "-","key_money": null,"keymoney_unit": 1,"disp_repair_cost": "-","repair_cost": null,"repaircost_unit": 1,"house_plan": "1R","disp_area": "17.88","area": 17.88,"trader_id": 16742,"new_arrival": false}]},{"disp_name": "メインステージ東神田","property_name": "メインステージ東神田","room_number_text": "1204","traffic": "東京都浅草線東日本橋駅 徒歩7分","address": "東京都千代田区東神田１丁目","all_floor_num": "12","house_age": "築14年","completion_date": "2003年8月","new_build": false,"building_kind":"マンション","city_id": 13101,"latitude": 128497632,"longitude": 503210562,"property_images":[{"kind": 1,"url": "www.eheya.net/propertyimage/000/000/300/166/140/000/124/002/387/000000300166140000124002387_1_1.jpg"},{"kind": 10,"url": "www.eheya.net/propertyimage/000/000/300/166/140/000/124/002/387/000000300166140000124002387_10_1.jpg"}],"same_building_num": 2,"same_building_properties": [{"property_full_id": 300166140000124002387,"firm_side_code": "27444205-1","floor": "12","room_number_text": "1204","disp_price": "8.5万円","price": 85000,"disp_manage_cost": "5,000円","manage_cost": 5000,"disp_deposit": "-","deposit": null,"deposit_unit": 1,"disp_key_money": "-","key_money": null,"keymoney_unit": 1,"disp_repair_cost": "-","repair_cost": null,"repaircost_unit": 1,"house_plan": "1K","disp_area": "24.83","area": 24.83,"trader_id": 16614,"new_arrival": true},{"property_full_id": 300201850000226009050,"firm_side_code": "27834125-1","floor": "7","room_number_text": "904","disp_price": "8.5万円","price": 85000,"disp_manage_cost": "5,000円","manage_cost": 5000,"disp_deposit": "-","deposit": null,"deposit_unit": 1,"disp_key_money": "-","key_money": null,"keymoney_unit": 1,"disp_repair_cost": "-","repair_cost": null,"repaircost_unit": 1,"house_plan": "1K","disp_area": "24.83","area": 24.83,"trader_id": 20185,"new_arrival": true}]},{"disp_name": "岩本町駅　1K　12階","property_name": "メインステージ東神田","room_number_text": "-","traffic": "東京都新宿線岩本町駅 徒歩3分","address": "東京都千代田区東神田１丁目","all_floor_num": "12","house_age": "築14年","completion_date": "2003年8月","new_build": false,"building_kind":"マンション","city_id": 13101,"latitude": 128497632,"longitude": 503210562,"property_images":[{"kind": 1,"url": "www.eheya.net/propertyimage/000/000/300/277/681/000/888/000/001/000000300277681000888000001_1_1.jpg"},{"kind": 10,"url": "www.eheya.net/propertyimage/000/000/300/277/681/000/888/000/001/000000300277681000888000001_10_1.jpg"}],"same_building_num": 1,"same_building_properties": [{"property_full_id": 300277681000888000001,"firm_side_code": "h1017-1","floor": "12","room_number_text": "-","disp_price": "8.5万円","price": 85000,"disp_manage_cost": "5,000円","manage_cost": 5000,"disp_deposit": "-","deposit": null,"deposit_unit": 1,"disp_key_money": "-","key_money": null,"keymoney_unit": 1,"disp_repair_cost": "-","repair_cost": null,"repaircost_unit": 1,"house_plan": "1K","disp_area": "28.7","area": 28.7,"trader_id": 27768,"new_arrival": true}]},{"disp_name": "東日本橋駅　1K　12階","property_name": "メインステージ東神田","room_number_text": "12階","traffic": "東京都浅草線東日本橋駅 徒歩7分","address": "東京都千代田区東神田１丁目","all_floor_num": "12","house_age": "築14年","completion_date": "2003年8月","new_build": false,"building_kind":"マンション","city_id": 13101,"latitude": 128502033,"longitude": 503214472,"property_images":[{"kind": 1,"url": "img.apamanshop.com/fs/Original/img/images/5133720500/11384162_31_C58968_K0372_M1.jpg"},{"kind": 10,"url": "img.apamanshop.com/fs/Original/img/images/5133720500/11384162_3084_G1.jpg"}],"same_building_num": 2,"same_building_properties": [{"property_full_id": 300100940008381012624,"firm_side_code": "76762999","floor": "12","room_number_text": "12階","disp_price": "8.5万円","price": 85000,"disp_manage_cost": "5,000円","manage_cost": 5000,"disp_deposit": "-","deposit": null,"deposit_unit": 1,"disp_key_money": "-","key_money": null,"keymoney_unit": 1,"disp_repair_cost": "-","repair_cost": null,"repaircost_unit": 1,"house_plan": "1K","disp_area": "24.83","area": 24.83,"trader_id": 10094,"new_arrival": false},{"property_full_id": 300056670053889053947,"firm_side_code": "1102267079","floor": "12","room_number_text": "12","disp_price": "8.5万円","price": 85000,"disp_manage_cost": "5,000円","manage_cost": 5000,"disp_deposit": "-","deposit": null,"deposit_unit": 1,"disp_key_money": "-","key_money": null,"keymoney_unit": 1,"disp_repair_cost": "-","repair_cost": null,"repaircost_unit": 1,"house_plan": "1K","disp_area": "24.83","area": 24.83,"trader_id": 5667,"new_arrival": false}]},{"disp_name": "メインステージ東神田","property_name": "メインステージ東神田","room_number_text": "12","traffic": "総武・中央緩行線浅草橋駅 徒歩7分","address": "東京都千代田区東神田１丁目","all_floor_num": "12","house_age": "築14年","completion_date": "2003年8月","new_build": false,"building_kind":"マンション","city_id": 13101,"latitude": 128502162,"longitude": 503214326,"property_images":[{"kind": 1,"url": "www.eheya.net/propertyimage/000/000/300/167/420/034/216/034/216/000000300167420034216034216_1_1.jpg"},{"kind": 10,"url": "www.eheya.net/propertyimage/000/000/300/167/420/034/216/034/216/000000300167420034216034216_10_1.jpg"}],"same_building_num": 1,"same_building_properties": [{"property_full_id": 300167420034216034216,"firm_side_code": "904824","floor": "12","room_number_text": "12","disp_price": "8.5万円","price": 85000,"disp_manage_cost": "5,000円","manage_cost": 5000,"disp_deposit": "-","deposit": null,"deposit_unit": 1,"disp_key_money": "-","key_money": null,"keymoney_unit": 1,"disp_repair_cost": "-","repair_cost": null,"repaircost_unit": 1,"house_plan": "1K","disp_area": "24.83","area": 24.83,"trader_id": 16742,"new_arrival": false}]},{"disp_name": "岩本町駅　1R　3階","property_name": "メイクスデザイン秋葉原","room_number_text": "304","traffic": "東京都新宿線岩本町駅 徒歩3分","address": "東京都千代田区神田須田町２丁目","all_floor_num": "10","house_age": "築15年","completion_date": "2002年8月","new_build": false,"building_kind":"マンション","city_id": 13101,"latitude": 128507289,"longitude": 503181216,"property_images":[{"kind": 1,"url": "img.apamanshop.com/fs/Original/img/images/5133720500/2882419_14_888116_3084_M1.jpg"},{"kind": 10,"url": "img.apamanshop.com/fs/Original/img/images/5133720500/2882419_3084_G1.jpg"}],"same_building_num": 2,"same_building_properties": [{"property_full_id": 300100940007685011692,"firm_side_code": "77069873","floor": "3","room_number_text": "304","disp_price": "8.9万円","price": 89000,"disp_manage_cost": "8,000円","manage_cost": 8000,"disp_deposit": "-","deposit": null,"deposit_unit": 1,"disp_key_money": "1.0ヶ月","key_money": 1.0,"keymoney_unit": 2,"disp_repair_cost": "-","repair_cost": null,"repaircost_unit": 1,"house_plan": "1R","disp_area": "22.07","area": 22.07,"trader_id": 10094,"new_arrival": true},{"property_full_id": 300100940007685011691,"firm_side_code": "77060584","floor": "3","room_number_text": "304","disp_price": "9.4万円","price": 94000,"disp_manage_cost": "8,000円","manage_cost": 8000,"disp_deposit": "-","deposit": null,"deposit_unit": 1,"disp_key_money": "1.0ヶ月","key_money": 1.0,"keymoney_unit": 2,"disp_repair_cost": "-","repair_cost": null,"repaircost_unit": 1,"house_plan": "1R","disp_area": "22.07","area": 22.07,"trader_id": 10094,"new_arrival": true}]},{"disp_name": "九段下駅　1K　4階","property_name": "スカイコート九段下","room_number_text": "404m","traffic": "東京地下鉄東西線九段下駅 徒歩4分","address": "東京都千代田区飯田橋２丁目","all_floor_num": "12","house_age": "築13年","completion_date": "2004年4月","new_build": false,"building_kind":"マンション","city_id": 13101,"latitude": 128514879,"longitude": 503099748,"property_images":[{"kind": 1,"url": "www.eheya.net/propertyimage/000/000/300/145/850/023/082/023/748/000000300145850023082023748_1_1.jpg"},{"kind": 10,"url": "www.eheya.net/propertyimage/000/000/300/145/850/023/082/023/748/000000300145850023082023748_10_1.jpg"}],"same_building_num": 3,"same_building_properties": [{"property_full_id": 300145850023082023748,"firm_side_code": "t12852","floor": "4","room_number_text": "404m","disp_price": "9.2万円","price": 92000,"disp_manage_cost": "8,000円","manage_cost": 8000,"disp_deposit": "-","deposit": null,"deposit_unit": 1,"disp_key_money": "1.0ヶ月","key_money": 1.0,"keymoney_unit": 2,"disp_repair_cost": "-","repair_cost": null,"repaircost_unit": 1,"house_plan": "1K","disp_area": "23.27","area": 23.27,"trader_id": 14585,"new_arrival": false},{"property_full_id": 300099400006112008147,"firm_side_code": "77020103","floor": "12","room_number_text": "1201","disp_price": "9.6万円","price": 96000,"disp_manage_cost": "10,000円","manage_cost": 10000,"disp_deposit": "-","deposit": null,"deposit_unit": 1,"disp_key_money": "1.0ヶ月","key_money": 1.0,"keymoney_unit": 2,"disp_repair_cost": "-","repair_cost": null,"repaircost_unit": 1,"house_plan": "1K","disp_area": "24.6","area": 24.6,"trader_id": 9940,"new_arrival": false},{"property_full_id": 300145850022989023655,"firm_side_code": "t12723","floor": "2","room_number_text": "205m","disp_price": "9.9万円","price": 99000,"disp_manage_cost": "8,000円","manage_cost": 8000,"disp_deposit": "-","deposit": null,"deposit_unit": 1,"disp_key_money": "1.0ヶ月","key_money": 1.0,"keymoney_unit": 2,"disp_repair_cost": "-","repair_cost": null,"repaircost_unit": 1,"house_plan": "1K","disp_area": "27.65","area": 27.65,"trader_id": 14585,"new_arrival": false}]},{"disp_name": "スタイルヒルズ秋葉原","property_name": "スタイルヒルズ秋葉原","room_number_text": "302","traffic": "山手線秋葉原駅 徒歩8分","address": "東京都千代田区神田佐久間町４丁目","all_floor_num": "11","house_age": "築2年","completion_date": "2015年3月","new_build": false,"building_kind":"マンション","city_id": 13101,"latitude": 128514990,"longitude": 503206972,"property_images":[{"kind": 1,"url": "www.eheya.net/propertyimage/000/000/300/201/850/000/842/009/258/000000300201850000842009258_1_1.jpg"},{"kind": 10,"url": "www.eheya.net/propertyimage/000/000/300/201/850/000/842/009/258/000000300201850000842009258_10_1.jpg"}],"same_building_num": 1,"same_building_properties": [{"property_full_id": 300201850000842009258,"firm_side_code": "28010206-1","floor": "3","room_number_text": "302","disp_price": "9.25万円","price": 92500,"disp_manage_cost": "21,000円","manage_cost": 21000,"disp_deposit": "-","deposit": null,"deposit_unit": 1,"disp_key_money": "-","key_money": null,"keymoney_unit": 1,"disp_repair_cost": "-","repair_cost": null,"repaircost_unit": 1,"house_plan": "1K","disp_area": "25.99","area": 25.99,"trader_id": 20185,"new_arrival": true}]},{"disp_name": "プレール神田佐久間町","property_name": "プレール神田佐久間町","room_number_text": "1103","traffic": "山手線秋葉原駅 徒歩6分","address": "東京都千代田区神田佐久間町４丁目","all_floor_num": "12","house_age": "築16年","completion_date": "2001年9月","new_build": false,"building_kind":"マンション","city_id": 13101,"latitude": 128511480,"longitude": 503207370,"property_images":[{"kind": 1,"url": "www.eheya.net/propertyimage/000/000/300/137/890/000/230/022/331/000000300137890000230022331_1_1.jpg"},{"kind": 10,"url": "www.eheya.net/propertyimage/000/000/300/137/890/000/230/022/331/000000300137890000230022331_10_1.jpg"}],"same_building_num": 1,"same_building_properties": [{"property_full_id": 300137890000230022331,"firm_side_code": "26148003-1","floor": "11","room_number_text": "1103","disp_price": "9.3万円","price": 93000,"disp_manage_cost": "8,000円","manage_cost": 8000,"disp_deposit": "-","deposit": null,"deposit_unit": 1,"disp_key_money": "1.0ヶ月","key_money": 1.0,"keymoney_unit": 2,"disp_repair_cost": "-","repair_cost": null,"repaircost_unit": 1,"house_plan": "1K","disp_area": "20.06","area": 20.06,"trader_id": 13789,"new_arrival": false}]},{"disp_name": "九段下駅　1R　5階","property_name": "プレール九段","room_number_text": "501m","traffic": "東京地下鉄半蔵門線九段下駅 徒歩1分","address": "東京都千代田区九段北１丁目","all_floor_num": "10","house_age": "築16年","completion_date": "2000年12月","new_build": false,"building_kind":"マンション","city_id": 13101,"latitude": 128506550,"longitude": 503106828,"property_images":[{"kind": 1,"url": "www.eheya.net/propertyimage/000/000/300/145/850/023/046/023/712/000000300145850023046023712_1_1.jpg"},{"kind": 10,"url": "www.eheya.net/propertyimage/000/000/300/145/850/023/046/023/712/000000300145850023046023712_10_1.jpg"}],"same_building_num": 1,"same_building_properties": [{"property_full_id": 300145850023046023712,"firm_side_code": "t12800","floor": "5","room_number_text": "501m","disp_price": "9.3万円","price": 93000,"disp_manage_cost": "8,000円","manage_cost": 8000,"disp_deposit": "-","deposit": null,"deposit_unit": 1,"disp_key_money": "1.0ヶ月","key_money": 1.0,"keymoney_unit": 2,"disp_repair_cost": "-","repair_cost": null,"repaircost_unit": 1,"house_plan": "1R","disp_area": "24.12","area": 24.12,"trader_id": 14585,"new_arrival": false}]},{"disp_name": "浅草橋駅　1K　11階","property_name": "プレール神田佐久間町","room_number_text": "1103","traffic": "東京都浅草線浅草橋駅 徒歩5分","address": "東京都千代田区神田佐久間町４丁目","all_floor_num": "12","house_age": "築16年","completion_date": "2001年9月","new_build": false,"building_kind":"マンション","city_id": 13101,"latitude": 128511414,"longitude": 503207343,"property_images":[{"kind": 1,"url": "img.apamanshop.com/fs/Original/img/images/5133720500/11261833_18_F03881_K0372_M1.jpg"},{"kind": 10,"url": "img.apamanshop.com/fs/Original/img/images/5133720500/540834_K0372_G1.jpg"}],"same_building_num": 1,"same_building_properties": [{"property_full_id": 300100940008526012770,"firm_side_code": "75889024","floor": "11","room_number_text": "1103","disp_price": "9.3万円","price": 93000,"disp_manage_cost": "8,000円","manage_cost": 8000,"disp_deposit": "-","deposit": null,"deposit_unit": 1,"disp_key_money": "1.0ヶ月","key_money": 1.0,"keymoney_unit": 2,"disp_repair_cost": "-","repair_cost": null,"repaircost_unit": 1,"house_plan": "1K","disp_area": "20.06","area": 20.06,"trader_id": 10094,"new_arrival": false}]},{"disp_name": "スカイコート神田２","property_name": "スカイコート神田２","room_number_text": "02010","traffic": "山手線秋葉原駅 徒歩7分","address": "東京都千代田区東神田２丁目","all_floor_num": "12","house_age": "築12年","completion_date": "2005年3月","new_build": false,"building_kind":"マンション","city_id": 13101,"latitude": 128505832,"longitude": 503209517,"property_images":[{"kind": 10,"url": "www.eheya.net/propertyimage/000/000/300/055/560/016/149/042/659/000000300055560016149042659_10_1.jpg"}],"same_building_num": 3,"same_building_properties": [{"property_full_id": 300055560016149042659,"firm_side_code": "3-04694651162-201","floor": "2","room_number_text": "02010","disp_price": "9.3万円","price": 93000,"disp_manage_cost": "9,000円","manage_cost": 9000,"disp_deposit": "-","deposit": null,"deposit_unit": 1,"disp_key_money": "1.0ヶ月","key_money": 1.0,"keymoney_unit": 2,"disp_repair_cost": "-","repair_cost": null,"repaircost_unit": 1,"house_plan": "1K","disp_area": "22.6","area": 22.6,"trader_id": 5556,"new_arrival": false},{"property_full_id": 300055560025824045206,"firm_side_code": "3-04694926459-403","floor": "4","room_number_text": "04030","disp_price": "9.5万円","price": 95000,"disp_manage_cost": "9,000円","manage_cost": 9000,"disp_deposit": "-","deposit": null,"deposit_unit": 1,"disp_key_money": "1.0ヶ月","key_money": 1.0,"keymoney_unit": 2,"disp_repair_cost": "-","repair_cost": null,"repaircost_unit": 1,"house_plan": "1K","disp_area": "22.6","area": 22.6,"trader_id": 5556,"new_arrival": false},{"property_full_id": 300055560016149026150,"firm_side_code": "3-04694651162-503","floor": "5","room_number_text": "05030","disp_price": "9.5万円","price": 95000,"disp_manage_cost": "9,000円","manage_cost": 9000,"disp_deposit": "-","deposit": null,"deposit_unit": 1,"disp_key_money": "1.0ヶ月","key_money": 1.0,"keymoney_unit": 2,"disp_repair_cost": "-","repair_cost": null,"repaircost_unit": 1,"house_plan": "1K","disp_area": "22.6","area": 22.6,"trader_id": 5556,"new_arrival": false}]},{"disp_name": "ガラステージ神田","property_name": "ガラステージ神田","room_number_text": "1103","traffic": "山手線神田駅 徒歩2分","address": "東京都千代田区神田須田町１丁目","all_floor_num": "13","house_age": "築12年","completion_date": "2005年7月","new_build": false,"building_kind":"マンション","city_id": 13101,"latitude": -1,"longitude": -1,"property_images":[{"kind": 1,"url": "www.eheya.net/propertyimage/000/000/300/150/830/015/696/015/801/000000300150830015696015801_1_1.jpg"},{"kind": 10,"url": "www.eheya.net/propertyimage/000/000/300/150/830/015/696/015/801/000000300150830015696015801_10_1.jpg"}],"same_building_num": 1,"same_building_properties": [{"property_full_id": 300150830015696015801,"firm_side_code": "g847","floor": "11","room_number_text": "1103","disp_price": "9.4万円","price": 94000,"disp_manage_cost": "9,000円","manage_cost": 9000,"disp_deposit": "-","deposit": null,"deposit_unit": 1,"disp_key_money": "1.0ヶ月","key_money": 1.0,"keymoney_unit": 2,"disp_repair_cost": "-","repair_cost": null,"repaircost_unit": 1,"house_plan": "1K","disp_area": "22.54","area": 22.54,"trader_id": 15083,"new_arrival": true}]},{"disp_name": "スカイコート九段下","property_name": "スカイコート九段下","room_number_text": "1201","traffic": "東京地下鉄東西線九段下駅 徒歩4分","address": "東京都千代田区飯田橋２丁目","all_floor_num": "12","house_age": "築13年","completion_date": "2004年4月","new_build": false,"building_kind":"マンション","city_id": 13101,"latitude": 128514879,"longitude": 503099748,"property_images":[{"kind": 1,"url": "www.eheya.net/propertyimage/000/000/300/145/850/023/154/023/820/000000300145850023154023820_1_1.jpg"},{"kind": 10,"url": "www.eheya.net/propertyimage/000/000/300/145/850/023/154/023/820/000000300145850023154023820_10_1.jpg"}],"same_building_num": 1,"same_building_properties": [{"property_full_id": 300145850023154023820,"firm_side_code": "t12935","floor": "12","room_number_text": "1201","disp_price": "9.6万円","price": 96000,"disp_manage_cost": "10,000円","manage_cost": 10000,"disp_deposit": "-","deposit": null,"deposit_unit": 1,"disp_key_money": "1.0ヶ月","key_money": 1.0,"keymoney_unit": 2,"disp_repair_cost": "-","repair_cost": null,"repaircost_unit": 1,"house_plan": "1K","disp_area": "24.6","area": 24.6,"trader_id": 14585,"new_arrival": false}]}]}
"""
        val adapter = moshi.adapter(GetListMergePropertyResponse::class.java)
        val response = adapter.fromJson(json)
        assertNotNull(response)
        response?.run {
            assertEquals(44, totalCount)
            assertEquals(20, properties.size)
            properties[0].apply {
                assertEquals("岩本町駅　1K　7階", dispName)
                assertEquals(1, sameBuildingProperties.size)
                sameBuildingProperties[0].apply {
                    assertEquals("300277681000829000001", propertyFullId)
                    assertEquals(22.74f, area)
                }
            }
            properties[1].apply {
                assertEquals("小伝馬町駅　1R　13階", dispName)
                assertEquals(1, sameBuildingProperties.size)
                sameBuildingProperties[0].apply {
                    assertEquals("300123640004149016123", propertyFullId)
                    assertEquals(21.43f, area)
                }
            }
        }
        println(response)
    }

    @Test
    fun testGetListMergeProperty() {
        val cityIds = listOf(
                listOf("13102"),
                listOf("13101"),
                listOf("13102", "13103", "13104")
        )

        cityIds.forEach {
            val url = "/portalapi/callApp.jsp?function=GetListMergeProperty&auth_code=218993f4634&entry_date=201708301655&start_number=1&max_count=100&" + it.map {
                "city_id=" + it
            }.joinToString("&")

            println(url)
            val response = api.getListMergeProperty(url)
                    .subscribeOn(Schedulers.io())
                    .test()
                    .await()
                    .assertNoErrors()
                    .values().first()

            println(response)
            println(response?.properties?.size)
            response?.properties?.forEach {
                println("-- dispName=${it.dispName} --")
                it.sameBuildingProperties.forEach {
                    println("\tpropertyFullId=" + it.propertyFullId)
                    println("\tdispPrice=" + it.dispPrice)
                }
            }
        }
    }
}